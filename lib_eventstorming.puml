!global $ICON_FORMAT="png"
!global $TEXT_WIDTH_MAX=200
!global $MSG_WIDTH_MAX=150
!global $FONT_SIZE_XS=10
!global $FONT_SIZE_SM=12
!global $FONT_SIZE_MD=16
!global $FONT_SIZE_LG=20
!global $FONT_COLOR="#212121"
!global $FONT_COLOR_LIGHT="#757575"

!function $randomColor()
!$colors = "#8B0000,#A52A2A,#B22222,#DC143C,#FF0000,#FF6347,#FF4500,#FF8C00,#FFA500,#FFD700,#B8860B,#DAA520,#EEE8AA,#BDB76B,#F0E68C,#808000,#556B2F,#6B8E23,#9ACD32,#00FF00,#32CD32,#00FF32,#00FA9A,#90EE90,#98FB98,#8FBC8F,#00FF7F,#00C957,#3CB371,#2E8B57,#228B22,#008000,#006400,#9ACD32,#6B8E23,#808000,#556B2F,#66CDAA,#8FBC8F,#20B2AA,#008B8B,#008080,#5F9EA0,#4682B4,#6495ED,#00CED1,#00BFFF,#87CEEB,#87CEFA,#00BFFF,#ADD8E6,#B0E0E6,#87CEEB,#4169E1,#0000FF,#0000CD,#00008B,#000080,#191970,#483D8B,#6A5ACD,#7B68EE,#9370DB,#8A2BE2,#9400D3,#9932CC,#BA55D3,#DA70D6,#EE82EE,#DDA0DD,#C71585,#FF1493,#FF69B4,#FFB6C1,#FFC0CB,#F08080,#CD5C5C,#A0522D,#8B4513,#D2691E,#CD853F,#F4A460,#DEB887,#D2B48C,#BC8F8F,#F5DEB3,#FFEBCD,#FFE4E1,#FFDEAD,#F5F5DC,#FDF5E6,#FFFAF0,#FFFFF0,#FAEBD7,#FAF0E6,#FFF8DC,#FFFFE0,#2F4F4F,#696969,#708090,#778899,#B0C4DE,#E6E6FA,#FFFAF0,#F0F8FF,#F5F5F5,#DCDCDC,#D3D3D3,#C0C0C0,#A9A9A9,#808080,#1F1F1F,#2F2F2F,#3F3F3F,#4F4F4F,#5F5F5F,#6F6F6F,#7F7F7F,#8F8F8F,#9F9F9F,#000000,#0F0F0F,#1A1A1A,#2A2A2A,#3A3A3A,#4A4A4A,#5A5A5A,#6A6A6A,#7A7A7A,#8A8A8A,#9A9A9A,#AA1A1A,#BB2B2B,#CC3C3C,#DD4D4D,#EE5E5E,#FF6F6F,#AA0A0A,#BB1B1B,#CC2C2C,#DD3D3D,#EE4E4E,#FF5F5F,#1AAA1A,#2BBB2B,#3CCC3C,#4DDD4D,#5EEE5E,#6FFF6F,#0AAA0A,#1BBB1B,#2CCC2C,#3DDD3D,#4EEE4E,#5FFF5F,#1A1AAA,#2B2BBB,#3C3CCC,#4D4DDD,#5E5EEE,#6F6FFF,#0A0AAA,#1B1BBB,#2C2CCC,#3D3DDD,#4E4EEE,#5F5FFF,#AA1AAA,#BB2BBB,#CC3CCC,#DD4DDD,#EE5EEE,#FF6FFF,#AA0AAA,#BB1BBB,#CC2CCC,#DD3DDD,#EE4EEE,#FF5FFF,#AAAA1A,#BBBB2B,#CCCC3C,#DDDD4D,#EEEE5E,#FFFF6F,#AAAA0A,#BBBB1B,#CCCC2C,#DDDD3D,#EEEE4E,#FFFF5F,#1AAAAA,#2BBBBB,#3CCCCC,#4DDDDD,#5EEEEE,#6FFFFF,#0AAAAA,#1BBBBB,#2CCCCC,#3DDDDD,#4EEEEE,#5FFFFF,#800020,#8B008B,#9932CC,#8A2BE2,#4B0082,#483D8B,#6A5ACD,#7B68EE,#9370DB,#663399,#8B0000,#A0522D,#CD853F,#D2691E,#FF7F50,#FF6347,#FF4500,#FF8C00,#FFA500,#FFD700,#FFFF00,#ADFF2F,#7FFF00,#32CD32,#00FF00,#90EE90,#00FA9A,#00FF7F,#3CB371,#2E8B57,#228B22,#008000,#006400,#9ACD32,#6B8E23,#556B2F,#808000,#66CDAA,#8FBC8F,#20B2AA,#00CED1,#40E0D0,#48D1CC,#00BFFF,#1E90FF,#6495ED,#4682B4,#5F9EA0,#B0C4DE,#4169E1,#0000FF,#0000CD,#00008B,#000080,#191970,#483D8B,#6A5ACD,#7B68EE,#9370DB,#8A2BE2,#9400D3,#9932CC,#8B008B,#800080,#4B0082,#663399,#8B0000,#A52A2A,#B22222,#DC143C,#FF0000,#FF1493,#FF69B4,#FFB6C1,#FFC0CB,#F08080,#CD5C5C,#A0522D,#8B4513,#D2691E,#CD853F,#F4A460,#DEB887,#D2B48C,#BC8F8F,#800000,#8B0000,#A52A2A,#B22222,#DC143C,#FF0000,#FF1493,#FF69B4,#C71585,#DA70D6,#EE82EE,#DDA0DD,#D8BFD8,#E6E6FA,#F5F5DC,#8B4513,#A0522D,#CD853F,#D2691E,#F4A460,#DEB887,#D2B48C,#BC8F8F,#696969,#708090,#778899,#2F4F4F,#191970,#000080,#00008B,#0000CD,#0000FF,#4169E1,#6495ED,#4682B4,#5F9EA0,#B0C4DE,#483D8B,#6A5ACD,#7B68EE,#9370DB,#8A2BE2,#9400D3,#9932CC,#8B008B,#800080,#4B0082,#2E8B57,#228B22,#008000,#006400,#556B2F,#808000,#6B8E23,#9ACD32,#32CD32,#00FF00,#7FFF00,#ADFF2F,#FFFF00,#FFD700,#FFA500,#FF8C00,#FF4500,#FF6347,#FF7F50"
!$colorArray = %splitstr($colors, ",")
!$index = %random(0, %size($colorArray)-1)
!return $colorArray[$index]
!endfunction

!procedure $Flow($from, $through, $to1="", $to2="", $to3="", $to4="", $to5="")
!$color = $randomColor()

$from -[$color]-> $through

!if ($to != "")
$through -[$color]-> $to1
!endif

!if ($to2 != "")
$through -[$color]-> $to2
!endif

!if ($to3 != "")
$through -[$color]-> $to3
!endif

!if ($to4 != "")
$through -[$color]-> $to4
!endif

!if ($to5 != "")
$through -[$color]-> $to5
!endif
!endprocedure

!procedure EsEntity($shape, $stereotype, $id, $label="")
  !if ($label != "")
    $shape "$label" as $id <<$stereotype>>
  !else
    $shape $id <<$stereotype>>
  !endif
!endprocedure

show stereotype

skinparam defaultTextAlignment center
skinparam wrapWidth 200
skinparam maxMessageSize 150

skinparam Arrow {
    Color $FONT_COLOR
    FontColor $FONT_COLOR
    FontSize $FONT_SIZE_SM
}


' definition of the Item eventstorming/Element/FacadeCommand
skinparam file<<FacadeCommand>> {
    StereotypeFontSize $FONT_SIZE_SM
    shadowing false
    FontColor $FONT_COLOR
    BorderColor $FONT_COLOR
    BackgroundColor #779fae
}

!procedure FacadeCommand($id, $label="")
  EsEntity('file', 'FacadeCommand', $id, $label)
!endprocedure
' definition of the Item eventstorming/Element/Command


skinparam file<<Command>> {
    StereotypeFontSize $FONT_SIZE_SM
    shadowing false
    FontColor $FONT_COLOR
    BorderColor $FONT_COLOR
    BackgroundColor #aec6cf
}

!procedure Command($id, $label="")
  EsEntity('file', 'Command', $id, $label)
!endprocedure

' definition of the Item eventstorming/Element/Result
skinparam file<<Result>> {
    StereotypeFontSize $FONT_SIZE_SM
    shadowing false
    FontColor $FONT_COLOR
    BorderColor $FONT_COLOR
    BackgroundColor #cfcfc4
}

!procedure Result($id, $label="")
  EsEntity('file', 'Result', $id, $label)
!endprocedure
' definition of the Item eventstorming/Element/Event


skinparam file<<Event>> {
    StereotypeFontSize $FONT_SIZE_SM
    shadowing false
    FontColor $FONT_COLOR
    BorderColor $FONT_COLOR
    BackgroundColor #ffb853
}

!procedure Event($id, $label="")
  EsEntity('file', 'Event', $id, $label)
!endprocedure

' definition of the Item eventstorming/Element/DomainEvent
skinparam file<<DomainEvent>> {
    StereotypeFontSize $FONT_SIZE_SM
    shadowing false
    FontColor $FONT_COLOR
    BorderColor $FONT_COLOR
    BackgroundColor #ffcb81
}

!procedure DomainEvent($id, $label="")
  EsEntity('file', 'DomainEvent', $id, $label)
!endprocedure

' definition of the Item eventstorming/Element/IntegrationEvent
skinparam file<<IntegrationEvent>> {
    StereotypeFontSize $FONT_SIZE_SM
    shadowing false
    FontColor $FONT_COLOR
    BorderColor $FONT_COLOR
    BackgroundColor #ffdeaf
}

!procedure IntegrationEvent($id, $label="")
  EsEntity('file', 'IntegrationEvent', $id, $label)
!endprocedure

' definition of the Item eventstorming/Element/Query
skinparam file<<Query>> {
    StereotypeFontSize $FONT_SIZE_SM
    shadowing false
    FontColor $FONT_COLOR
    BorderColor $FONT_COLOR
    BackgroundColor #62d862
}

!procedure Query($id, $label="")
  EsEntity('file', 'Query', $id, $label)
!endprocedure

' definition of the Item eventstorming/Element/ReadModel
skinparam file<<ReadModel>> {
    StereotypeFontSize $FONT_SIZE_SM
    shadowing false
    FontColor $FONT_COLOR
    BorderColor $FONT_COLOR
    BackgroundColor #77dd77
}

!procedure ReadModel($id, $label="")
  EsEntity('file', 'ReadModel', $id, $label)
!endprocedure

' definition of the Item eventstorming/Element/UserInterface
skinparam file<<UserInterface>> {
    StereotypeFontSize $FONT_SIZE_SM
    shadowing false
    FontColor $FONT_COLOR
    BorderColor $FONT_COLOR
    BackgroundColor #a2e8a2
}

!procedure UserInterface($id, $label="")
  EsEntity('file', 'UserInterface', $id, $label)
!endprocedure

' definition of the Item eventstorming/Element/Aggregate
skinparam file<<Aggregate>> {
    StereotypeFontSize $FONT_SIZE_SM
    shadowing false
    FontColor $FONT_COLOR
    BorderColor $FONT_COLOR
    BackgroundColor #fdfd9d
}

!procedure Aggregate($id, $label="")
  EsEntity('file', 'Aggregate', $id, $label)
!endprocedure

' definition of the Item eventstorming/Element/Service
skinparam file<<Service>> {
    StereotypeFontSize $FONT_SIZE_SM
    shadowing false
    FontColor $FONT_COLOR
    BorderColor $FONT_COLOR
    BackgroundColor #fcfc78
}

!procedure Service($id, $label="")
  EsEntity('file', 'Service', $id, $label)
!endprocedure
' definition of the Item eventstorming/Element/Policy


skinparam file<<Policy>> {
    StereotypeFontSize $FONT_SIZE_SM
    shadowing false
    FontColor $FONT_COLOR
    BorderColor $FONT_COLOR
    BackgroundColor #b6a2db
}

!procedure Policy($id, $label="")
  EsEntity('file', 'Policy', $id, $label)
!endprocedure

' definition of the Item eventstorming/Element/Saga
skinparam file<<Saga>> {
    StereotypeFontSize $FONT_SIZE_SM
    shadowing false
    FontColor $FONT_COLOR
    BorderColor $FONT_COLOR
    BackgroundColor #c9bbe5
}

!procedure Saga($id, $label="")
  EsEntity('file', 'Saga', $id, $label)
!endprocedure

' definition of the Item eventstorming/Element/Process
skinparam file<<Process>> {
    StereotypeFontSize $FONT_SIZE_SM
    shadowing false
    FontColor $FONT_COLOR
    BorderColor $FONT_COLOR
    BackgroundColor #ddd4ee
}

!procedure Process($id, $label="")
  EsEntity('file', 'Process', $id, $label)
!endprocedure

' definition of the Item eventstorming/Element/Timer
skinparam file<<Timer>> {
    StereotypeFontSize $FONT_SIZE_SM
    shadowing false
    FontColor $FONT_COLOR
    BorderColor $FONT_COLOR
    BackgroundColor #cfcfc4
}

!procedure Timer($id, $label="")
  EsEntity('file', 'Timer', $id, $label)
!endprocedure

' definition of the Item eventstorming/Element/Person
skinparam actor<<Person>> {
    StereotypeFontSize 0
    shadowing false
    FontColor $FONT_COLOR
    BorderColor $FONT_COLOR
    BackgroundColor #ffd1dc
}

!procedure Person($id, $label="")
  EsEntity('actor', 'Person', $id, $label)
!endprocedure

' definition of the Item eventstorming/Element/System
skinparam file<<System>> {
    StereotypeFontSize $FONT_SIZE_SM
    shadowing false
    FontColor $FONT_COLOR
    BorderColor $FONT_COLOR
    BackgroundColor #ffd1dc
}

!procedure System($id, $label="")
  EsEntity('file', 'System', $id, $label)
!endprocedure

' definition of the Item eventstorming/Element/Comment
skinparam file<<Comment>> {
    StereotypeFontSize $FONT_SIZE_SM
    shadowing false
    FontColor $FONT_COLOR
    BorderColor $FONT_COLOR
    BackgroundColor transparent
}

!procedure Comment($id, $label="")
  EsEntity('file', 'Comment', $id, $label)
!endprocedure

skinparam rectangle<<Handler>> {
    StereotypeFontSize $FONT_SIZE_SM
    shadowing false
    FontColor $FONT_COLOR
    BorderColor $FONT_COLOR
    BackgroundColor #e8f4fd
}

!procedure Handler($id, $label="")
  EsEntity('file', 'Handler', $id, $label)
!endprocedure